@(user : User,articleOrders : List[models.durableArticles.Procurement], year : Integer)

@import java.text.SimpleDateFormat
@import java.util.Locale

@header("optionCalculateDepreciate")

@nav(user)
@headerTag("ระบบคำนวณค่าเสื่อม")
@sideMenu(user)


<div class="listWindow">
        <div class="tableHeaderBtnContainer">
            <span style="font-size:25px">
                ระบบคำนวณค่าเสื่อม
            </span>
            <button class="btn btn-primary glyphicon glyphicon-print marginLeft2" style="float:right"onclick="printLink('http://localhost:9000/report/DurableArticles/print')">
                พิมพ์ครุภัณฑ์ทั้งหมด
            </button>
            <button class="btn btn-info glyphicon glyphicon-print" style="float:right" onclick="printTable()">
                พิมพ์ตารางนี้
            </button>
        </div>
        <div class="tableHeaderBtnContainer">
                <div class="searchS">
                            <div class="form-group">
                                <div class="input-group">
                                  <span class="input-group-addon">ค้นหา</span>
                                  <input type="text" class="form-control" style="width:250px">
                                </div>
                              </div>
                </div>
                 <form role="form" method="post" action="@routes.Option.optionCalculatingDepreciate()" name="calculatingDepreciateForm">
                     <div>
                        <div style="width:15%; float:right; margin-left:1%;">
                            <button class="btn btn-success" style="width:100%;" type="submit">คำนวณค่าเสื่อม</button>
                        </div>
                        <div class="form-group"style="width:200px;float:right;">
                           <div class="input-group">
                               <span class="input-group-addon">ปีที่</span>
                               <input type="number" class="form-control" name="years" onkeypress="validateNumberKey(event)" size="4" maxlength="4" value="@year">
                           </div>
                        </div>
                    </div>
                 </form>
        </div>

        <div class="adminUserinfoTableContainer">
            <table class="table table-striped overlayTable">
                

                <thead>
                    <tr>
                    	<th>วัน เดือน ปี<span class="glyphicon glyphicon-sort"></span></th>
                        <th>รายการ<span class="glyphicon glyphicon-sort"></span></th>
                        <th>ทะเบียนครุภัณฑ์<span class="glyphicon glyphicon-sort"></span></th>
                        <th>จำนวน<span class="glyphicon glyphicon-sort"></span></th>
                        <th>ราคา<span class="glyphicon glyphicon-sort"></span></th>
                        <th>อายุการใช้งาน<span class="glyphicon glyphicon-sort"></span></th>
                        <th>ค่าเสื่อมรายปี<span class="glyphicon glyphicon-sort"></span></th>
                        <th>ค่าเสื่อมราคาสะสม<span class="glyphicon glyphicon-sort"></span></th>
                        <th>ค่าเสื่อมราคาประจำปี<span class="glyphicon glyphicon-sort"></span></th>
                        <th>มูลค่าสินทรัพย์<span class="glyphicon glyphicon-sort"></span></th>
                    </tr>
                </thead>
                <tbody>
       			
                @for((articleOrder,index) <- articleOrders.zipWithIndex){
                        @for((subOrders,index2) <- articleOrder.details.zipWithIndex){
                            <tr>
                            <th>@articleOrder.getAddDate()</th>
                            <th>@subOrders.description</th>
                            <th>@subOrders.fsn.descriptionId</th>
                            <th>@subOrders.quantity</th>
                            <th>@("%.0f".format(articleOrder.round(subOrders.getSumablePrice(),2)))</th>
                            <th>@subOrders.llifeTime</th>
                            <th>@("%.2f".format(articleOrder.round(subOrders.getAnnualDepricate(),2)))</th> <!-- ค่าเสื่อมต่อปี -->
        
                            
                            <!-- ค่าเสือมสะสม -->
                            <th id="temp2@index@index2"></th>
        
                            <!-- ค่าเสือมประจำปี -->
                                <th id="temp0@index@index2"></th>
                          
                            
                            
                            <!--<th>@articleOrder.round(subOrders.depreciationPrice,2)</th>-->
                            <th id="temp1@index@index2">@subOrders.getTotalDepricate(year)</th>
                            </tr>
                            <script>
                                var temp = document.getElementById("temp1@index@index2").innerHTML;
                                temp = temp.substr(1,temp.length-2);
                                temp = temp.split(",");
                                document.getElementById("temp2@index@index2").innerHTML =parseFloat(temp[2]).toPrecision(10);
                                document.getElementById("temp0@index@index2").innerHTML =parseFloat(temp[0]).toPrecision(10);
                                document.getElementById("temp1@index@index2").innerHTML =parseFloat(temp[1]).toPrecision(10);
                            </script>
                        }
                 }

                </tbody>


            </table>

        </div> 

</div>
@footer()
